<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>t4-button-link</title>

    <link rel="icon" sizes="50x50" type="image/gif" href="images/icons8-wrench.gif">
    <link rel="stylesheet" type="text/css" href="css/common-style.css">
    <link rel="stylesheet" type="text/css" href="css/link-menu.css">
    <link href="libs/jsoneditor.min.css" rel="stylesheet" type="text/css">

    <script src="libs/jsoneditor.min.js"></script>
    <script src="libs/js-yaml.js"></script>
    <script defer src="js/menu-common.js"> </script>
</head>
<body>
  <!-- class="button-menu" -->
  <!-- style="display: flex; justify-content: space-between;" -->
  <!-- class="button-menu11" -->
  <header class="row-block">
    <div class="header-logo">
        <img src="images/site-logo.gif" alt="site-logo" width="50" height="50">
        <h2>SedSvcEmu</h2>
    </div>
    <nav id="menu-top" class="button-menu"> 
       <button id="tab-standart" class="button-menu__item" onclick="clickTopMenu(event)">standart</button>
       <button id="tab-extend" class="button-menu__item" onclick="clickTopMenu(event)">extend</button>
       <button id="tab-special-a" class="button-menu__item" onclick="clickTopMenu(event)">special-a</button>
       <button id="tab-special-b" class="button-menu__item" onclick="clickTopMenu(event)">special-b</button>
       <button id="tab-config" class="button-menu__item" onclick="clickTopMenu(event)">config</button>
   </nav>
</header>

<div class="row-block">
    <aside id="menu-cmd" class="button-menu button-menu_vertical">
       <button id="cmd-stamp" class="button-menu__item" onclick="clickCmdMenu(event)">stamp</button>
       <button id="cmd-pdf" class="button-menu__item" onclick="clickCmdMenu(event)">pdf</button>
       <button id="cmd-over" class="button-menu__item" onclick="clickCmdMenu(event)">over</button>
   </aside>
   <main class="r-panel">
    
    <div class="r-panel__top">
        form action:
        <button id="form-action" class="btn-common" onclick="showActionDialog()">
            http://localhost:8070/ext-sedsvc/upload-m/?command=svcCheckPdf
        </button>
    </div>

    <!-- action="http://localhost:8070/ext-sedsvc/upload-m/?command=svcMakeStamp" -->
    <form id="example-request" 
       action="http://localhost:8070/ext-sedsvc/upload-m/?command=svcCheckPdf"
       method="POST" enctype="multipart/form-data">
       Content-Type: 
       <input id="request-type" type="text" autocomplete=off size=60 name="contentType" 
            value="application/vnd.intertrust.cm.sedsvc+json;type=svcCheckPdf-request">
        <hr>

    </form>
    <textarea id="request-text" form="example-request" 
       class="r-panel_request-text" name="mainData" required minLength="10">
{

    "skipPDFA1check" : true
}
    </textarea>

    <div class="r-panel__buttons">
        <label id="fileAinputLabel" for="fileAinput" class="r-panel__btn-label">Passport file</label>
        <span id="fileAinputInfo"></span>
        <input type="file" id="fileAinput" form="example-request" name="file" multiple="multiple">
        <br>
        <label id="fileBinputLabel" for="fileBinput" class="r-panel__btn-label">Addition-data file</label>
        <span id="fileBinputInfo"></span>
        <input type="file" id="fileBinput" form="example-request" name="file" multiple="multiple">
        <br>
        <label id="fileCinputLabel" for="fileCinput" class="r-panel__btn-label">extenC</label>
        <span id="fileCinputInfo"></span>
        <input type="file" id="fileCinput" form="example-request" name="file" multiple="multiple">
        <hr>
        <button type="button" class="btn-common" onclick="clickFiles(event)" >test FileInfo(A,B,C)</button>
        <button type="button" class="btn-common" onclick="testYamlLoad(event)">test ParseYaml</button>
        <hr>
        <input type="submit" form="example-request" class="btn-common" value="выполнить запрос формы">
        <input type="reset" form="example-request" class="btn-common" value="сброс формы" onClick="exampleRequestReset(event)">
    </div>

    </main>
</div>

<dialog id="actionDialog" onClose="execDialog(event)" class="action-dialog">
  <form method="dialog">
    <p>
      <label for="formActionUrl">action URL формы</label>
      <br>
      <input id="formActionUrl" type="text" autocomplete=off size=60 value="111">
    </p>
    <div>
      <button class="btn-common">отмена</button>
      <button class="btn-common" value="x-confirm">подтвердить</button>
    </div>
  </form>
</dialog>

<footer> (c) Tenged, 2024 </footer>
</body>

<script type="text/javascript">
    const elActionDialog = document.getElementById("actionDialog");
    const elButtonName= document.getElementById("form-action")
    const elFormAction= document.getElementById("example-request")
    const elActionDialogUrl = document.getElementById("formActionUrl")

    function showActionDialog() {
        console.log("showActionDialog-beg")
        elActionDialogUrl.value=elFormAction.action
        elActionDialog.showModal()
        console.log("showActionDialog-end")
    }

    function execDialog(event) {
        let dialogReturn=event.target.returnValue
        console.log("execDialog-beg")
        console.log(dialogReturn)
        if ("x-confirm" !== dialogReturn) {
            console.log("reset!")
            return
        }
        console.log("confirm!")
        console.log(elActionDialogUrl.value)
        elButtonName.innerText=elActionDialogUrl.value
        elFormAction.action=elActionDialogUrl.value
        console.log("execDialog-end")
    }

</script>
<!-- work  check pdf
R1
            <input type="file" id="file" name="file">
        //<input type="file" id="fileXinput2" name="fileX2" multiple="multiple">

R2
        <input type="file" form="example-request" name="file">
        <input type="file" form="example-request" name="file" multiple="multiple">
-->
</html>

