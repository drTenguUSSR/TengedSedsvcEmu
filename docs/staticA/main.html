<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SedSvcEmu main</title>

    <link rel="icon" sizes="50x50" type="image/gif" href="images/icons8-wrench.gif">
    <link rel="stylesheet" type="text/css" href="css/common-style.css">
    <link rel="stylesheet" type="text/css" href="css/link-menu.css">
    <link href="libs/jsoneditor.min.css" rel="stylesheet" type="text/css">

    <script src="libs/jsoneditor.min.js"></script>
    <script src="libs/js-yaml.js"></script>
    <script defer src="js/menu-common.js"> </script>
</head>
<body>
  <!-- class="button-menu" -->
  <!-- style="display: flex; justify-content: space-between;" -->
  <!-- class="button-menu11" -->
  <header class="row-header">
    <div class="header-logo">
        <img src="images/site-logo.gif" alt="site-logo" width="50" height="50">
        <h2>SedSvcEmu</h2>
    </div>
    <nav id="menu-top" class="hmenu"> 
       <button id="tab-standart" class="hmenu__item button_xmenu" onclick="clickTopMenu(event)">standart</button>
       <button id="tab-extend" class="hmenu__item button_xmenu" onclick="clickTopMenu(event)">extend</button>
       <button id="tab-special-a" class="hmenu__item button_xmenu" onclick="clickTopMenu(event)">special-a</button>
       <button id="tab-special-b" class="hmenu__item button_xmenu" onclick="clickTopMenu(event)">special-b</button>
       <button id="q-version" class="hmenu__item button_xmenu hmenu__item_short" onclick="clickTopMenu(event)">ver</button>
       <button id="q-log" class="hmenu__item button_xmenu hmenu__item_short" onclick="clickTopMenu(event)">log</button>
   </nav>
</header>

<div class="row-side">
    <aside id="menu-cmd" class="smenu">
       <button id="cmd-stamp" class="smenu__item button_xmenu" onclick="clickCmdMenu(event)">stamp</button>
       <button id="cmd-pdf" class="smenu__item button_xmenu" onclick="clickCmdMenu(event)">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Eos dignissimos, nihil molestias quia sunt, 
        voluptate mollitia provident obcaecati eveniet recusandae architecto nisi consequatur corporis 
        officiis aspernatur beatae voluptatum laboriosam minus!
       </button>
       <button id="cmd-over1" class="smenu__item button_xmenu" onclick="clickCmdMenu(event)">
        Сервис для наложения png файлов на указанные координаты заданного размера
        </button>
   </aside>
   <main class="r-panel">
    <div class="r-panel__top">
        form action:
        <button id="form-action" class="btn-common" onclick="showActionDialog()">
            http://localhost:8070/ext-sedsvc/upload-m/?command=svcCheckPdf
        </button>
    </div>
    <!-- action="http://localhost:8070/ext-sedsvc/upload-m/?command=svcMakeStamp" -->
    <form id="example-request" 
       action="http://localhost:8070/ext-sedsvc/upload-m/?command=svcCheckPdf"
       method="POST" enctype="multipart/form-data">
       Content-Type: 
       <input id="request-type" type="text" autocomplete=off size=60 name="contentType" 
            value="application/vnd.intertrust.cm.sedsvc+json;type=svcCheckPdf-request">
        <hr>

    </form>
    <textarea id="request-text" form="example-request" 
       class="r-panel_request-text" name="mainData" required minLength="10">
{

    "skipPDFA1check" : true
}
    </textarea>

    <div class="r-panel__buttons">
        <label id="fileAinputLabel" for="fileAinput" class="r-panel__btn-label">Passport file</label>
        <span id="fileAinputInfo"></span>
        <input type="file" id="fileAinput" form="example-request" name="file" multiple="multiple">
        <br>
        <label id="fileBinputLabel" for="fileBinput" class="r-panel__btn-label">Addition-data file</label>
        <span id="fileBinputInfo"></span>
        <input type="file" id="fileBinput" form="example-request" name="file" multiple="multiple">
        <br>
        <label id="fileCinputLabel" for="fileCinput" class="r-panel__btn-label">extenC</label>
        <span id="fileCinputInfo"></span>
        <input type="file" id="fileCinput" form="example-request" name="file" multiple="multiple">
        <input type="submit" form="example-request" class="btn-common" value="выполнить запрос формы">
        <input type="reset" form="example-request" class="btn-common" value="сброс формы" onClick="exampleRequestReset(event)">
    </div>

    </main>
</div>

<dialog id="actionDialog" onClose="dialogExec(event)" class="action-dialog">
  <form method="dialog">
    <p>
      <label for="formActionUrl">action URL формы</label>
      <br>
      <input id="formActionUrl" type="text" autocomplete=off size=60>
    </p>
    <div>
      <button class="btn-common" value="x-reset">Сброс</button>
      <button class="btn-common" value="x-cancel">Отмена</button>
      <button class="btn-common" value="x-confirm">Подтвердить</button>
    </div>
  </form>
</dialog>

<footer> (c) drTengu &#x1f47a;, 2024 &#129489;&#8205;&#128295;
    <hr>
        <button type="button" class="btn-common" onclick="testQueryTopElements(event)" >test QueryTopElements</button>
    <hr>
        <button type="button" class="btn-common" onclick="testFilesInfo(event)" >test FileInfo(A,B,C)</button>
        <button type="button" class="btn-common" onclick="testYamlLoad(event)">test ParseYaml</button>
</footer>
</body>

<script type="text/javascript">
    const elActionDialog = document.getElementById("actionDialog");
    const elButtonName= document.getElementById("form-action")
    const elFormAction= document.getElementById("example-request")
    const elActionDialogUrl = document.getElementById("formActionUrl")
    const initialUrlAction = elFormAction.action

    elActionDialog.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                event.preventDefault()
                console.log("dialog-down:"+event.key)
                elActionDialog.close("x-cancel")
            }
    });

    function showActionDialog() {
        console.log("showActionDialog-beg")
        elActionDialogUrl.value=elFormAction.action
        elActionDialog.showModal()
        console.log("showActionDialog-end")
    }

    function dialogExec(event) {
        let dialogReturn=event.target.returnValue
        console.log("dialogExec-beg",dialogReturn,dialogReturn.length)
        if (dialogReturn == "x-cancel") {
            console.log("cancel!")
        } else if (dialogReturn == "x-confirm") {
            console.log("confirm!"+elActionDialogUrl.value)
            elButtonName.innerText=elActionDialogUrl.value
            elFormAction.action=elActionDialogUrl.value
        } else if ("x-reset" == dialogReturn) {
            elButtonName.innerText = initialUrlAction
            elFormAction.action = initialUrlAction
            console.log("dialogReset:"+initialUrlAction)
        } else {
            console.log("unexpected-return="+dialogReturn)
        }
        console.log("dialogExec-end")
    }
</script>
<!-- work  check pdf
R1
            <input type="file" id="file" name="file">
        //<input type="file" id="fileXinput2" name="fileX2" multiple="multiple">

R2
        <input type="file" form="example-request" name="file">
        <input type="file" form="example-request" name="file" multiple="multiple">
-->
</html>

